# Runtime Mode & Server
NODE_ENV=production
# NestJSの内部ポート
PORT=3000
# Nginx/Cloudflare経由段数
TRUST_PROXY_HOPS=1

# CORS & Frontend
FRONT_ORIGIN=https://xxx.example.net
CORS_ORIGIN=https://xxx.example.net http://localhost:3000

# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=SAMPLE_ANON_KEY_REPLACE_WITH_ACTUAL_KEY
SUPABASE_SERVICE_ROLE_KEY=SAMPLE_SERVICE_ROLE_KEY_REPLACE_WITH_ACTUAL_KEY
# TTL (ms) for auth status cache inside SupabaseAuthGuard. Defaults to 60000 when unset.
SUPABASE_AUTH_CACHE_TTL_MS=60000

# AI Services
GEMINI_API_KEY=AIzaSySAMPLE_GEMINI_API_KEY_REPLACE_WITH_ACTUAL_KEY
# Optional override for Gemini endpoint (defaults to GA: gemini-2.5-flash)
GEMINI_API_URL=https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent
OPENAI_API_KEY=sk-SAMPLE_OPENAI_API_KEY_REPLACE_WITH_ACTUAL_KEY

# Redis / Bull
REDIS_URL=redis://redis:6379/0

# Cloudflare R2
CLOUDFLARE_ACCOUNT_ID=sample-account-id-replace-with-actual
CLOUDFLARE_ACCESS_KEY_ID=sample-access-key-replace-with-actual
CLOUDFLARE_SECRET_ACCESS_KEY=sample-secret-key-replace-with-actual
CLOUDFLARE_BUCKET_NAME=sample-bucket-name
# Optional: allow-list multiple buckets when staging/prod use different R2 buckets
# Comma or whitespace separated list. Defaults to CLOUDFLARE_BUCKET_NAME.
CLOUDFLARE_ALLOWED_BUCKETS=sample-bucket-name
# Optional: allowed key prefixes. `{userId}` placeholder is replaced at runtime.
# Defaults to `podcasts/{userId}/,summaries/{userId}/`
CLOUDFLARE_ALLOWED_PREFIXES=podcasts/{userId}/ summaries/{userId}/

# Optional: Public domain for R2 object delivery (if using a custom domain)
# Used by CloudflareR2Service to build public URLs like https://<domain>/<key>
CLOUDFLARE_PUBLIC_DOMAIN=public.example.net

# Google Cloud Text-to-Speech (TTS)
# Project ID for Google Cloud where TTS API is enabled.
GOOGLE_TTS_PROJECT_ID=your-gcp-project-id
# Service Account credentials for TTS. Provide JSON string or base64-encoded JSON.
# If unset, the client uses Application Default Credentials (ADC).
GOOGLE_TTS_CREDENTIALS={"type":"service_account","project_id":"your-gcp-project-id","private_key_id":"...","private_key":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n","client_email":"tts-sa@your-gcp-project-id.iam.gserviceaccount.com","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/..."}
# Alternatively, point to a credential file for ADC-compatible environments.
GOOGLE_APPLICATION_CREDENTIALS=/workdir/keys/google-tts-service-account.json


# RSS Fetch Security (Safe Fetch Layer)
# Allow HTTP (development only). Default=false. When false, https only.
FEED_FETCH_ALLOW_HTTP=false
# Maximum redirects to follow (3xx). Default=3
FEED_FETCH_MAX_REDIRECTS=3
# Connect timeout in ms (until TCP/TLS handshake). Default=2000
FEED_FETCH_CONNECT_TIMEOUT_MS=2000
# Response header timeout in ms (until first byte of headers). Default=5000
FEED_FETCH_RESPONSE_TIMEOUT_MS=5000
# Body idle timeout (no data interval) in ms during streaming. Default=5000
FEED_FETCH_BODY_IDLE_TIMEOUT_MS=5000
# Total timeout across redirects in ms. Default=10000
FEED_FETCH_TOTAL_TIMEOUT_MS=10000
# Max decompressed response size in bytes. Default=5242880 (~5MB)
FEED_FETCH_MAX_BYTES=5242880
# Fixed User-Agent to send on upstream requests
FEED_FETCH_USER_AGENT=MyceliaRSSFetcher/1.0
# Extra deny CIDRs (comma/space separated). Example: "100.64.0.0/10, 198.18.0.0/15"
FEED_FETCH_EXTRA_DENY_CIDRS=
